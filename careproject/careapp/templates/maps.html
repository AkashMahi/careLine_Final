{% extends 'patient_dash.html' %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% block title %}
    <title>Navigate | Patient</title>
    {% endblock %}
</head>
    {% block dash %}
<body>
    <!-- <div id="map" style="height: 400px;"></div> -->
    <div id="map-container">
        <iframe id="map-frame" width="100%" height="700" style="border:0;" allowfullscreen="" loading="" referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>
    
    <!-- <script>
         
        function initMap(location){
            var lat = location.latitude
            var lon = location.longitude
            var position = {lat: lat, lng: lon};
            var map = new google.maps.Map(document.getElementById('map'), {
                center: position,
                zoom: 12
            });
            var marker = new google.maps.Marker({
                position: position,
                map: map
            });
        }
        

        function successCallback(position) {
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;

            var newLocation = {
                latitude: latitude,
                longitude: longitude
            };
            initMap(newLocation)

        }

        
        function errorCallback(error) {
            console.error('Error getting location:', error);
        }

        
        navigator.geolocation.getCurrentPosition(successCallback, errorCallback);

		
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCLssid6A0qV_y8Oi9h1t1AdOoWqYRQrY8" async defer></script> -->
    <script>
        function updateMap(location) {
            var iframe = document.getElementById('map-frame');
            iframe.src = 'https://www.google.com/maps/embed?pb=!1m17!1m12!1m3!1d1914.5805959326444!2d' + location.longitude + '!3d' + location.latitude + '!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zOMKwNTInMTcuOSJOIDc2wrA0MycxOS44IkU!5e1!3m2!1sen!2sin!4v1686897370248!5m2!1sen!2sin';
        }

        // Function to handle the success callback of geolocation API
        function successCallback(position) {
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;

            var newLocation = {
                latitude: latitude,
                longitude: longitude
            };

            updateMap(newLocation);
        }

        // Function to handle the error callback of geolocation API
        function errorCallback(error) {
            console.error('Error getting location:', error);
        }

        // Call geolocation API to get the current position
        navigator.geolocation.getCurrentPosition(successCallback, errorCallback);

		

    </script>
    {% endblock %}
</body>
</html>